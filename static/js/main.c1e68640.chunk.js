(this.webpackJsonpspotibud=this.webpackJsonpspotibud||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){},51:function(e){e.exports=JSON.parse('["Aardvark","Albatross","Alligator","Alpaca","Ant","Anteater","Antelope","Ape","Armadillo","Donkey","Baboon","Badger","Barracuda","Bat","Bear","Beaver","Bee","Bison","Boar","Buffalo","Butterfly","Camel","Capybara","Caribou","Cassowary","Cat","Caterpillar","Cattle","Chamois","Cheetah","Chicken","Chimpanzee","Chinchilla","Chough","Clam","Cobra","Cockroach","Cod","Cormorant","Coyote","Crab","Crane","Crocodile","Crow","Curlew","Deer","Dinosaur","Dog","Dogfish","Dolphin","Dotterel","Dove","Dragonfly","Duck","Dugong","Dunlin","Eagle","Echidna","Eel","Eland","Elephant","Elk","Emu","Falcon","Ferret","Finch","Fish","Flamingo","Fly","Fox","Frog","Gaur","Gazelle","Gerbil","Giraffe","Gnat","Gnu","Goat","Goldfinch","Goldfish","Goose","Gorilla","Goshawk","Grasshopper","Grouse","Guanaco","Gull","Hamster","Hare","Hawk","Hedgehog","Heron","Herring","Hippopotamus","Hornet","Horse","Human","Hummingbird","Hyena","Ibex","Ibis","Jackal","Jaguar","Jay","Jellyfish","Kangaroo","Kingfisher","Koala","Kookabura","Kouprey","Kudu","Lapwing","Lark","Lemur","Leopard","Lion","Llama","Lobster","Locust","Loris","Louse","Lyrebird","Magpie","Mallard","Manatee","Mandrill","Mantis","Marten","Meerkat","Mink","Mole","Mongoose","Monkey","Moose","Mosquito","Mouse","Mule","Narwhal","Newt","Nightingale","Octopus","Okapi","Opossum","Oryx","Ostrich","Otter","Owl","Oyster","Panther","Parrot","Partridge","Peafowl","Pelican","Penguin","Pheasant","Pig","Pigeon","Pony","Porcupine","Porpoise","Quail","Quelea","Quetzal","Rabbit","Raccoon","Rail","Ram","Rat","Raven","Red deer","Red panda","Reindeer","Rhinoceros","Rook","Salamander","Salmon","Sand Dollar","Sandpiper","Sardine","Scorpion","Seahorse","Seal","Shark","Sheep","Shrew","Skunk","Snail","Snake","Sparrow","Spider","Spoonbill","Squid","Squirrel","Starling","Stingray","Stinkbug","Stork","Swallow","Swan","Tapir","Tarsier","Termite","Tiger","Toad","Trout","Turkey","Turtle","Viper","Vulture","Wallaby","Walrus","Wasp","Weasel","Whale","Wildcat","Wolf","Wolverine","Wombat","Woodcock","Woodpecker","Worm","Wren","Yak","Zebra"]')},56:function(e,t,a){"use strict";a.r(t);var s=a(4),o=a.n(s),n=a(33),i=a.n(n),r=(a(42),a(31)),l=a(16),c=a(17),u=a(19),d=a(18),h=(a(43),a(26)),m=h.a.initializeApp({apiKey:"AIzaSyCdHlj6bH24v9JyLJmb2uHT4SfgDbk6utY",authDomain:"spotibud.firebaseapp.com",databaseURL:"https://spotibud-default-rtdb.firebaseio.com",projectId:"spotibud",storageBucket:"spotibud.appspot.com",messagingSenderId:"171308756762",appId:"1:171308756762:web:4a538418717f456ebe46a3",measurementId:"G-41MB6MS2WG"}),p=a(2),b=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).databaseAddress="Rooms/"+e.props.roomID,e.handleSubmit=function(t){t.preventDefault();var a=t.target.elements[0].value;if(""!==a){var s={message:a,userID:e.props.userID,timestamp:h.a.database.ServerValue.TIMESTAMP};t.target.elements[0].value="",m.database().ref(e.databaseAddress).push(s),e.setState({message:""})}},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"Textbox",children:Object(p.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(p.jsx)("input",{className:"textbox-input",type:"text",id:"message",placeholder:"Message your Spotibuddies <3"}),Object(p.jsx)("button",{className:"textbox-send",type:"submit",id:"send",children:"SEND"})]})})}}]),a}(s.Component);var j=function(e){return Object(p.jsxs)("div",{className:"song",children:[Object(p.jsx)("img",{className:"cover",src:e.art,width:"100%",alt:"song cover"}),Object(p.jsx)("p",{className:"album",children:Object(p.jsx)("i",{children:e.album})}),Object(p.jsx)("p",{className:"title",children:Object(p.jsx)("b",{children:e.song})}),Object(p.jsx)("p",{className:"artist",children:Object(p.jsx)("i",{children:e.artists})})]})},g=a(20),f=a.n(g);function O(e){if(console.log("damn"),!e.ok)throw Error(e.statusText);return e}var x=function(){var e=window.location.hash.indexOf("="),t=window.location.hash.indexOf("&"),a=window.location.hash.substring(e+1,t);if(""===a)"/callback/"!==window.location.pathname.substring(0,10)&&f.a.save("lastvisited",window.location.pathname,{path:"/"}),window.location.replace("https://accounts.spotify.com/authorize?client_id=ace3d22c8c11462195389df4b22e4a7c&response_type=token&redirect_uri="+encodeURIComponent(window.location.origin+"/callback/").toString());else{if("/callback/"!==window.location.pathname.substring(0,10))return console.log(f.a),fetch("https://api.spotify.com/v1/tracks/"+f.a.load("lastvisited").substring(7,29),{headers:{Authorization:"Bearer "+a}}).then(O).then((function(e){return e.json()})).then((function(e){return[!0,e]})).catch((function(e){return[!1,e]}));console.log("lol"),console.log(f.a.load("lastvisited")),window.location.replace(window.location.origin+f.a.load("lastvisited")+window.location.hash)}},w=a(34),v=a(8),y=a(36),S=a(37);var D=function(e){var t=new Date(e.message.timestamp),a=t.getHours()+":";return t.getMinutes()<=9&&(a+="0"),a+=t.getMinutes(),Object(p.jsx)("div",{className:"Message otherMessage",children:Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{className:"user",children:[e.message.userID," at ",a,": "]}),Object(p.jsxs)("p",{className:"text",children:[e.message.message," "]})]})})};var k=function(e){var t=new Date(e.message.timestamp),a=t.getHours()+":";return t.getMinutes()<=9&&(a+="0"),a+=t.getMinutes(),Object(p.jsx)("div",{className:"Message ownMessage",children:Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{className:"user",children:[e.message.userID," at ",a,": "]}),Object(p.jsxs)("p",{className:"text",children:[e.message.message," "]})]})})};var N=function(e){var t,a=[],o=Object(s.useState)(0),n=Object(S.a)(o,2);return n[0],n[1],Object(s.useEffect)((function(){t.scrollIntoView({behavior:"smooth"})})),e.data.forEach((function(t,s){t.userID===e.userID?(console.log(t.userID),console.log(e.userID),a.push(Object(p.jsx)(k,{message:t},s))):a.push(Object(p.jsx)(D,{message:t},s))})),0===a.length&&a.push(Object(p.jsx)("p",{children:"No messages were found! Be the first to start a conversation."})),Object(p.jsxs)("div",{className:"Messages",children:[a,Object(p.jsx)("div",{style:{float:"left",clear:"both"},ref:function(e){t=e}})]})},M=(a(49),m.database().ref().child("Rooms")),I=M,C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={messages:[]},s.componentDidMount=function(){s.buildMessages()},I=M.child(s.props.roomID),s}return Object(c.a)(a,[{key:"buildMessages",value:function(){var e=this;I.on("child_added",(function(t){if(t.val().message){var a=Object(y.a)(e.state.messages);a.push({message:t.val().message,userID:t.val().userID,timestamp:t.val().timestamp}),e.setState({messages:a})}}))}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"Chatbox",children:Object(p.jsx)(N,{data:this.state.messages,userID:this.props.userID})})}}]),a}(s.Component),L=(a(50),function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).handleUrlDrop=function(e){e.preventDefault();var t=e.target,a=new URL(t.elements[0].value);console.log(a.host),"spotify.com"===a.host||"open.spotify.com"===a.host?window.location.replace(window.location.origin+a.pathname):alert("This isn't a Spotify URL!")},a.state={willLoad:!0,loaded:!1,album:"None",artURL:"None",artists:"None",song:"None",songURL:"None",songID:"None",username:""},a}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this;"/"!=window.location.pathname&&x().then((function(t){if(console.log(t),!0===t[0]){console.log(t[1]),console.log(t[1].artists.map((function(e){return e.name})).join(", "));var s=a(51);e.setState({willLoad:!0,loaded:!0,album:t[1].album.name,artURL:t[1].album.images[0].url,artists:t[1].artists.map((function(e){return e.name})).join(", "),song:t[1].name,songURL:t[1].external_urls.spotify,songID:t[1].id,username:"Anonymous "+s[Math.floor(Math.random()*s.length)]})}else e.setState(Object(r.a)(Object(r.a)({},e.state),{},{willLoad:!1,loaded:!1,album:"None",artURL:"None",artists:"None",song:"None",songURL:"None",songID:"None"})),alert("We couldn't find the track you were looking for. Redirecting you to our homepage!"),window.location.replace(window.location.origin)}))}},{key:"render",value:function(){var e=[];return this.state.loaded?(e.push(Object(p.jsx)(C,{roomID:this.state.songID,userID:this.state.username})),e.push(Object(p.jsx)(b,{roomID:this.state.songID,userID:this.state.username}))):(this.state.willLoad,e.push()),Object(p.jsxs)("div",{children:[Object(p.jsx)("a",{href:window.location.origin,style:{textDecoration:"none"},children:Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center"},className:"header",children:[Object(p.jsx)("img",{style:{marginLeft:"5em",marginRight:"1em",marginBottom:"0"},src:window.location.origin+"/bud.png",width:"40em",alt:"best friend owo"}),Object(p.jsx)("h1",{style:{fontSize:"2.5em"},className:"Spotibud",children:Object(p.jsx)("b",{children:"Spotibud"})})]})}),Object(p.jsx)(w.a,{children:Object(p.jsxs)(v.c,{children:[Object(p.jsxs)(v.a,{path:"/",exact:!0,children:[Object(p.jsx)("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.min.js",integrity:"sha256-qM7QTJSlvtPSxVRjVWNM2OfTAz/3k5ovHOKmKXuYMO4=",crossOrigin:"anonymous"}),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("h1",{className:"App-text1",children:Object(p.jsx)("b",{children:"Drop Song URL Here"})}),Object(p.jsx)("form",{onSubmit:this.handleUrlDrop,children:Object(p.jsx)("input",{className:"App-url-input",type:"url",id:"url",onSubmit:this.handleUrlDrop})}),Object(p.jsx)("img",{className:"App-logo",src:"buds.png",width:"20%",alt:"best friends owo"}),Object(p.jsx)("p",{className:"App-text2",children:Object(p.jsx)("b",{children:"to meet spotibuddies"})})]})]}),Object(p.jsxs)(v.a,{children:[Object(p.jsx)("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.min.js",integrity:"sha256-qM7QTJSlvtPSxVRjVWNM2OfTAz/3k5ovHOKmKXuYMO4=",crossOrigin:"anonymous"}),Object(p.jsxs)("div",{className:"App2",children:[Object(p.jsx)(j,{className:"trackinfo",art:this.state.artURL,album:this.state.album,song:this.state.song,artists:this.state.artists}),Object(p.jsx)("div",{className:"chatroom",children:e}),Object(p.jsxs)("footer",{children:[Object(p.jsx)("a",{href:this.state.songURL,target:"_blank",children:Object(p.jsx)("img",{className:"spotifybutton",src:"https://www.freepnglogos.com/uploads/spotify-logo-png/spotify-icon-marilyn-scott-0.png",alt:"spotify link",width:"55vw"})}),Object(p.jsx)("a",{className:"text3",href:this.state.songURL,style:{color:"white"},children:"Listen on Spotify"})]})]})]})]})})]})}}]),s}(o.a.Component)),R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,57)).then((function(t){var a=t.getCLS,s=t.getFID,o=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),s(e),o(e),n(e),i(e)}))};i.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(L,{})}),document.getElementById("root")),R()}},[[56,1,2]]]);
//# sourceMappingURL=main.c1e68640.chunk.js.map