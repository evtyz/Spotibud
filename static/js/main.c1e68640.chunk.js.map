{"version":3,"sources":["Controllers/Firebase.js","Components/Textbox.js","Components/TrackInfo.js","Controllers/SpotifyQuery.js","Components/Message.js","Components/OwnMessage.js","Components/Messages.js","Components/Chatbox.js","App.js","reportWebVitals.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Textbox","databaseAddress","props","roomID","handleSubmit","e","preventDefault","messageText","target","elements","text","message","userID","timestamp","database","ServerValue","TIMESTAMP","value","ref","push","setState","className","onSubmit","this","type","id","placeholder","Component","TrackInfo","src","art","width","alt","album","song","artists","handleFetchErrors","response","console","log","ok","Error","statusText","getSpotifyTrackID","a","window","location","hash","indexOf","b","substring","pathname","cookie","save","path","replace","encodeURIComponent","origin","toString","fetch","load","headers","then","json","data","catch","error","Message","date","Date","time","getHours","getMinutes","OwnMessage","Messages","messageEnd","messages","useState","useEffect","scrollIntoView","behavior","forEach","element","index","length","style","float","clear","el","dbRefObject","child","dbRefMessagesList","Chatbox","state","componentDidMount","buildMessages","on","snap","val","App","handleUrlDrop","form","redirectURL","URL","host","alert","willLoad","loaded","artURL","songURL","songID","username","map","join","require","Math","floor","random","chatinterface","href","textDecoration","display","alignItems","marginLeft","marginRight","marginBottom","fontSize","exact","integrity","crossOrigin","color","React","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c1e68640.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCdHlj6bH24v9JyLJmb2uHT4SfgDbk6utY\",\r\n  authDomain: \"spotibud.firebaseapp.com\",\r\n  databaseURL: \"https://spotibud-default-rtdb.firebaseio.com\",\r\n  projectId: \"spotibud\",\r\n  storageBucket: \"spotibud.appspot.com\",\r\n  messagingSenderId: \"171308756762\",\r\n  appId: \"1:171308756762:web:4a538418717f456ebe46a3\",\r\n  measurementId: \"G-41MB6MS2WG\"\r\n}\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebaseApp;","import React, {Component} from \"react\";\r\nimport firebaseApp from \"../Controllers/Firebase\";\r\nimport firebase from 'firebase'\r\n\r\nclass Textbox extends Component {\r\n\r\n  databaseAddress = \"Rooms/\" + this.props.roomID;\r\n\r\n  handleSubmit=e=>{\r\n    e.preventDefault();\r\n    let messageText = e.target.elements[0]['value'];\r\n    if (messageText !== \"\") {\r\n      const text = {\r\n        message: messageText,\r\n        userID: this.props.userID,\r\n        timestamp: firebase.database.ServerValue.TIMESTAMP\r\n      }\r\n      e.target.elements[0].value=\"\";\r\n      firebaseApp.database().ref(this.databaseAddress).push(text)\r\n      this.setState({\r\n        message : \"\"\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Textbox\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <input className=\"textbox-input\" type=\"text\" id=\"message\" placeholder=\"Message your Spotibuddies <3\"></input>\r\n          <button className=\"textbox-send\" type=\"submit\" id=\"send\">SEND</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  } \r\n}\r\n  \r\nexport default Textbox;","function TrackInfo(props) {\r\n\r\n    return (\r\n        <div className=\"song\">\r\n            <img className=\"cover\" src={props.art} width = \"100%\" alt=\"song cover\"></img> \r\n            <p className=\"album\"><i>{props.album}</i></p>\r\n            <p className=\"title\"><b>{props.song}</b></p>\r\n            <p className=\"artist\"><i>{props.artists}</i></p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TrackInfo;","import cookie from 'react-cookies';\r\n\r\nlet dummy = \"http://localhost:3000/track/5Qsp8mtshe70DX7EYbWZGo?si=jpcMh9m4SCqQOKfNBPf3Yw\"\r\n\r\nfunction handleFetchErrors(response) {\r\n    console.log(\"damn\")\r\n    if (!response.ok) {\r\n        throw Error(response.statusText);\r\n    }\r\n    return response;\r\n}\r\n\r\nfunction getSpotifyTrackID() {\r\n    let a = window.location.hash.indexOf(\"=\")\r\n    let b = window.location.hash.indexOf(\"&\")\r\n    let hash = window.location.hash.substring(a+1, b);\r\n    if (hash === \"\") {\r\n        // If there's no hash yet, go get a hash.\r\n        if (window.location.pathname.substring(0, 10) !== \"/callback/\") {\r\n            cookie.save('lastvisited', window.location.pathname, {path: '/'});\r\n        } \r\n        window.location.replace('https://accounts.spotify.com/authorize?client_id=ace3d22c8c11462195389df4b22e4a7c&response_type=token&redirect_uri='\r\n        + encodeURIComponent(window.location.origin + \"/callback/\").toString())\r\n    } else {\r\n        let key = window.location.pathname.substring(0, 10);\r\n        if (key === \"/callback/\") {\r\n            // Second run through\r\n            console.log(\"lol\")\r\n            console.log(cookie.load('lastvisited'));\r\n            window.location.replace(window.location.origin + cookie.load('lastvisited') + window.location.hash)\r\n        } else {\r\n            // Third run through\r\n            console.log(cookie);\r\n            return fetch('https://api.spotify.com/v1/tracks/' + cookie.load('lastvisited').substring(7,29), {\r\n                headers: {\r\n                    'Authorization': 'Bearer ' + hash\r\n                }\r\n            }).then(handleFetchErrors)\r\n            .then( response => response.json())\r\n            .then(data => {return [true, data]})\r\n            .catch(error => {return [false, error]})\r\n        }\r\n    }\r\n}\r\n    // TODO: handle user rejection\r\n\r\nexport default getSpotifyTrackID;","import React from \"react\";\r\n\r\n\r\nfunction Message(props) {\r\n\r\n  let date = new Date(props.message.timestamp);\r\n  let time = date.getHours() + \":\";\r\n  if (date.getMinutes() <= 9) {\r\n    time = time + \"0\";\r\n  }\r\n  time = time + date.getMinutes();\r\n\r\n  return (\r\n    <div className=\"Message otherMessage\">\r\n      <div>\r\n      <p className=\"user\">{props.message.userID} at {time}: </p> \r\n      <p className=\"text\">{props.message.message} </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import React from \"react\";\r\n\r\n\r\nfunction OwnMessage(props) {\r\n  let date = new Date(props.message.timestamp);\r\n  let time = date.getHours() + \":\";\r\n  if (date.getMinutes() <= 9) {\r\n    time = time + \"0\";\r\n  }\r\n  time = time + date.getMinutes();\r\n  return (\r\n    <div className=\"Message ownMessage\">\r\n      <div>\r\n      <p className=\"user\">{props.message.userID} at {time}: </p> \r\n      <p className=\"text\">{props.message.message} </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OwnMessage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Message from \"./Message.js\";\r\nimport OwnMessage from \"./OwnMessage.js\"\r\n\r\n\r\n\r\nfunction Messages(props) {\r\n  let messages = [];\r\n  let messageEnd; \r\n  const [something, setSomething] = useState(0);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  })\r\n\r\n  props.data.forEach((element, index) => {\r\n    if (element.userID === props.userID) {\r\n      console.log(element.userID);\r\n      console.log(props.userID);\r\n      messages.push(<OwnMessage message={element} key={index}/>)\r\n    } else {\r\n      messages.push(<Message message={element} key={index}/>)\r\n    }\r\n  });\r\n\r\n  if (messages.length === 0) {\r\n    messages.push(<p>No messages were found! Be the first to start a conversation.</p>)\r\n  }\r\n  function scrollToBottom() {\r\n    messageEnd.scrollIntoView({ behavior: \"smooth\" });\r\n  }\r\n\r\n  return (\r\n    <div className=\"Messages\">\r\n      {messages}\r\n      <div style={{ float:\"left\", clear:\"both\" }} ref={(el) => { messageEnd = el; }}></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Messages;\r\n","import React, { Component } from \"react\";\r\nimport Messages from './Messages.js';\r\nimport firebaseApp from '../Controllers/Firebase.js';\r\nimport './Chatbox.css'\r\n\r\nconst dbRefObject = firebaseApp.database().ref().child('Rooms')\r\nlet dbRefMessagesList = dbRefObject;\r\n\r\nclass Chatbox extends Component {\r\n\r\n    state = {\r\n        messages: []\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        dbRefMessagesList = dbRefObject.child(this.props.roomID)\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.buildMessages();\r\n    }\r\n\r\n    buildMessages() {\r\n        dbRefMessagesList.on('child_added', snap => {\r\n           if (snap.val().message) {\r\n               let messages = [...this.state.messages]\r\n               messages.push({message: snap.val().message,\r\n                userID: snap.val().userID,\r\n                timestamp: snap.val().timestamp})\r\n               this.setState({ messages })\r\n           }\r\n       })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"Chatbox\">\r\n                <Messages data={this.state.messages} userID={this.props.userID}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Chatbox","import './App.css';\r\nimport Textbox from './Components/Textbox.js';\r\nimport TrackInfo from './Components/TrackInfo.js'\r\nimport getSpotifyTrackID from './Controllers/SpotifyQuery.js'\r\nimport React from 'react'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\";\r\nimport Chatbox from './Components/Chatbox';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      willLoad : true,\r\n      loaded : false,\r\n      album: \"None\",\r\n      artURL: \"None\",\r\n      artists: \"None\",\r\n      song: \"None\",\r\n      songURL: \"None\",\r\n      songID: \"None\",\r\n      username: \"\"\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (window.location.pathname != \"/\") {\r\n      getSpotifyTrackID().then( (value) =>\r\n      {\r\n        console.log(value)\r\n        if(value[0] === true) {\r\n          console.log(value[1])\r\n          console.log(value[1]['artists'].map(value => value['name']).join(\", \"))\r\n  \r\n          let json = require(\"./Components/animals.json\")\r\n          this.setState({\r\n            willLoad : true,\r\n            loaded : true,\r\n            album: value[1]['album']['name'],\r\n            artURL: value[1]['album']['images'][0]['url'],\r\n            artists: value[1]['artists'].map(value => value['name']).join(\", \"),\r\n            song: value[1]['name'],\r\n            songURL: value[1]['external_urls']['spotify'],\r\n            songID: value[1]['id'],\r\n            username: \"Anonymous \" + json[Math.floor(Math.random() * json.length)]\r\n          })\r\n        } else {\r\n          this.setState({\r\n            ...this.state,\r\n            willLoad : false,\r\n            loaded : false,\r\n            album: \"None\",\r\n            artURL: \"None\",\r\n            artists: \"None\",\r\n            song: \"None\",\r\n            songURL: \"None\",\r\n            songID: \"None\",\r\n          })\r\n          alert(\"We couldn't find the track you were looking for. Redirecting you to our homepage!\")\r\n          window.location.replace(window.location.origin)\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  handleUrlDrop = (e) =>\r\n  {\r\n    e.preventDefault();\r\n    let form = e.target;\r\n    let redirectURL = new URL(form.elements[0]['value'])\r\n    console.log(redirectURL.host)\r\n    if (redirectURL.host === \"spotify.com\" || redirectURL.host === \"open.spotify.com\") {\r\n      window.location.replace(window.location.origin + redirectURL.pathname);\r\n    } else {\r\n      alert(\"This isn't a Spotify URL!\")\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    let chatinterface = [];\r\n    if (this.state.loaded) {\r\n      chatinterface.push(<Chatbox roomID={this.state.songID} userID={this.state.username}/>)\r\n      chatinterface.push(<Textbox roomID={this.state.songID} userID={this.state.username}/>)\r\n    } else if (this.state.willLoad) {\r\n      chatinterface.push()// Add loading screen animation here\r\n    } else {\r\n      chatinterface.push()// Add error message here for api fail\r\n    }\r\n    return (\r\n      <div>\r\n          <a href={window.location.origin} style={{textDecoration: 'none'}}>\r\n            <div style={{display: 'flex', alignItems: 'center'}} className=\"header\">\r\n              <img style={{marginLeft: '5em', marginRight: '1em', marginBottom: '0'}} src={window.location.origin + \"/bud.png\"} width=\"40em\" alt=\"best friend owo\"></img>\r\n              <h1 style={{fontSize: \"2.5em\"}}className=\"Spotibud\"><b>Spotibud</b></h1>\r\n            </div>\r\n          </a>\r\n        <Router>\r\n        <Switch>\r\n          <Route path=\"/\" exact>\r\n          <script src=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.min.js\" integrity=\"sha256-qM7QTJSlvtPSxVRjVWNM2OfTAz/3k5ovHOKmKXuYMO4=\" crossOrigin=\"anonymous\"></script>\r\n            <div className=\"App\">\r\n              <h1 className=\"App-text1\"><b>Drop Song URL Here</b></h1>\r\n              <form onSubmit={this.handleUrlDrop}>\r\n                <input className=\"App-url-input\" type=\"url\" id=\"url\" onSubmit={this.handleUrlDrop}></input>\r\n              </form>\r\n              <img className=\"App-logo\" src={\"buds.png\"} width = \"20%\" alt=\"best friends owo\"></img>\r\n              <p className=\"App-text2\"><b>to meet spotibuddies</b></p>\r\n            </div>\r\n          </Route>\r\n          <Route>\r\n          <script src=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.min.js\" integrity=\"sha256-qM7QTJSlvtPSxVRjVWNM2OfTAz/3k5ovHOKmKXuYMO4=\" crossOrigin=\"anonymous\"></script>\r\n            <div className=\"App2\">\r\n              <TrackInfo className=\"trackinfo\" art={this.state.artURL} album={this.state.album} song={this.state.song} artists={this.state.artists}/>\r\n              <div className=\"chatroom\">\r\n                  {chatinterface}\r\n              </div>\r\n              <footer>\r\n              \r\n                <a href={this.state.songURL} target=\"_blank\">\r\n                  <img className=\"spotifybutton\" src=\"https://www.freepnglogos.com/uploads/spotify-logo-png/spotify-icon-marilyn-scott-0.png\" alt=\"spotify link\" width=\"55vw\" ></img>\r\n                </a>\r\n                <a className=\"text3\" href={this.state.songURL} style={{color: 'white'}}>Listen on Spotify</a>\r\n              </footer>\r\n            </div>\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n      </div>\r\n      );\r\n  }\r\n\r\n}\r\n\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}